#!/bin/bash
PK=/home/fusion809/GitHub/mine/packaging
pkgver=$(wget -cqO- https://github.com/swaywm/sway/releases | grep "\.tar\.gz" | grep "alpha\|beta\|\-rc" | head -n 1 | cut -d '"' -f 2 | cut -d '/' -f 6 | sed 's/\.tar\.gz//g')
pkgverf=$(echo $pkgver | cut -d '-' -f 1)
pkgver=$(echo $pkgver | sed 's/\-/\./g')
pkgverp=$(sed -n 's/pkgver=//p' $PK/sway/PKGBUILD | head -n 1 | sed 's/\.r/\-r/g')
pkgvers=$(wget -cqO- https://github.com/swaywm/sway/releases | grep "\.tar\.gz" | grep -v "alpha\|beta\|\-rc" | head -n 1 | cut -d '"' -f 2 | cut -d '/' -f 6 | sed 's/\.tar\.gz//g')

printf "$pkgver" > /tmp/sway
printf "$pkgverp\n" >> /tmp/sway

if ! [[ "$pkgver" == "$pkgverp" ]]; then
    # The follow test checks if there's a stable release out, or whether the new release is still in development
    if ! [[ $pkgverf == $pkgvers ]]; then
         printf "Sway$pkgver\n"
    else
         printf "Sway \n"
    fi
else
    printf "Sway\n"
fi
